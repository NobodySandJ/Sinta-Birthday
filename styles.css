/* --- Global Styles & Dark Theme --- */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&family=Pacifico&display=swap');

:root {
    --bg-dark: #1e1e2f;
    --card-dark: #27293d;
    --text-light: #e0e0e0;
    --text-subtle: #a9a9a9;
    --accent-color: #a88679;
    --shadow-color: rgba(0, 0, 0, 0.3);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-light);
    overflow-x: hidden;
}
body.with-player { padding-bottom: 80px; }

/* --- Background & Click Animation --- */
#background-animation {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden;
}
.bg-particle {
    position: absolute;
    color: rgba(255, 255, 255, 0.05);
    animation: float-around 30s infinite linear alternate;
    bottom: -150px;
    user-select: none;
    will-change: transform;
}
@keyframes float-around {
    from { transform: translateY(0) translateX(0vw) rotate(0deg); }
    to { transform: translateY(-120vh) translateX(5vw) rotate(360deg); }
}

/* --- Confetti --- */
.confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background-color: var(--accent-color);
    top: 0;
    opacity: 0;
    animation: fall 5s linear forwards;
    z-index: 102;
}
@keyframes fall {
    from { top: 0; opacity: 1; transform: translateY(0) rotate(0deg); }
    to { top: 100vh; opacity: 0.5; transform: translateY(0) rotate(720deg); }
}

/* --- Welcome Screen & Gift Box --- */
#welcome-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; display: flex; justify-content: center; align-items: center; text-align: center; padding: 2rem; background-color: var(--bg-dark); z-index: 100; transition: opacity 1s ease-out, transform 1s ease-out; }
#welcome-screen.hidden { opacity: 0; transform: scale(1.2); pointer-events: none; }
.welcome-content { background-color: var(--card-dark); padding: 2.5rem; border-radius: 20px; box-shadow: 0 15px 40px var(--shadow-color); max-width: 450px; width: 100%; border: 1px solid rgba(255, 255, 255, 0.1); }
.welcome-content h2 { font-size: 1.8rem; margin-bottom: 1rem; color: var(--text-light); }
.slider-container { margin: 1.5rem 0; }
#year-display { font-size: 3rem; font-weight: 700; color: var(--accent-color); margin-bottom: 1.5rem; }
.slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: #334155; border-radius: 4px; outline: none; }
.slider::-webkit-slider-thumb, .slider::-moz-range-thumb { width: 24px; height: 24px; background: var(--accent-color); cursor: pointer; border-radius: 50%; }

/* Pilihan Tema */
.color-picker-container { margin-bottom: 2rem; }
.color-picker-container label { display: block; margin-bottom: 0.75rem; color: var(--text-subtle); }
.theme-options-container { display: flex; justify-content: center; gap: 15px; }
.theme-option { width: 30px; height: 30px; border-radius: 50%; cursor: pointer; border: 3px solid transparent; transition: transform 0.2s, border-color 0.2s; }
.theme-option:hover { transform: scale(1.1); }
.theme-option.selected { border-color: #fff; transform: scale(1.15); box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }

#gift-box { position: relative; width: 100px; height: 85px; margin: 1rem auto 0; cursor: pointer; }
.gift-lid { width: 110px; height: 25px; background: var(--accent-color); position: absolute; top: 0; left: -5px; border-radius: 5px; z-index: 2; transition: transform 0.4s ease-in-out; }
.gift-lid::before { content: ''; position: absolute; width: 20px; height: 100%; background: #fff; left: 50%; transform: translateX(-50%); }
.gift-body { width: 100px; height: 70px; background: var(--accent-color); position: absolute; bottom: 0; left: 0; border-radius: 5px; z-index: 1; }
.gift-body::before { content: ''; position: absolute; width: 20px; height: 100%; background: #fff; left: 50%; transform: translateX(-50%); }
#gift-box.open .gift-lid { transform: translateY(-30px) rotate(15deg); }
.gift-instruction { color: var(--text-subtle); margin-top: 1rem; font-size: 0.9em; }

/* --- Main Content --- */
#main-content { opacity: 0; pointer-events: none; transition: opacity 1s ease-in 0.5s; min-height: 100vh; }
#main-content.visible { opacity: 1; pointer-events: auto; }
main { max-width: 800px; margin: 0 auto; padding: 2rem 1.5rem 8rem; display: flex; flex-direction: column; gap: 4rem; }
.section-title { font-family: 'Pacifico', cursive; font-size: 2.8rem; margin-bottom: 2rem; color: var(--accent-color); text-align: center; font-weight: 500;}

/* --- SVG Cake Section --- */
#cake-section { display: flex; justify-content: center; align-items: center; height: 500px; margin-top: -10em; }
#cake-container { position: relative; }
#cake-svg { display: block; width: 200px; height: 500px; overflow: visible; }
#cake-container.animate #bizcocho_1_anim { animation: bizcocho_1 0.8s 0.5s ease-out forwards; }
#cake-container.animate #relleno_1_anim { animation: relleno_1 0.5s 1.3s ease-out forwards; }
#cake-container.animate #bizcocho_2_anim { animation: bizcocho_2 0.5s 1.8s ease-out forwards; }
#cake-container.animate #relleno_2_anim { animation: relleno_2 0.5s 2.3s ease-out forwards; }
#cake-container.animate #bizcocho_3_anim { animation: bizcocho_3 0.3s 2.8s ease-out forwards; }
#cake-container.animate #crema_anim { animation: crema 2s 3.1s ease-out forwards; }
#cake-container.animate #vela_anim { animation: in 0.5s 5.1s ease-out forwards; }
#cake-container.animate .fuego { animation-name: fuego; animation-iteration-count: infinite; animation-timing-function: linear; animation-delay: 5.6s; }
#cake-container.animate .fuego:nth-child(1) { animation-duration: 2s; }
#cake-container.animate .fuego:nth-child(2) { animation-duration: 1.5s; }

/* Definisi Lilin dan Api */
.velas {
    background: #ffffff;
    border-radius: 10px;
    position: absolute;
    top: 228px;
    left: 50%;
    margin-left: -2.4px;
    width: 5px;
    height: 35px;
    opacity: 0;
}
.fuego {
    border-radius: 100%;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -2.6px;
    width: 6.6px;
    height: 18px;
    opacity: 0;
}

/* Animasi Lilin dan Api */
@keyframes in {
    from {
        opacity: 1;
        transform: translateY(-300px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
@keyframes fuego {
    0%, 100% { background: rgba(254, 248, 97, 0.5); box-shadow: 0 0 40px 10px rgba(248, 233, 209, 0.2); transform: translateY(0) scale(1); }
    50% { background: rgba(255, 50, 0, 0.1); box-shadow: 0 0 40px 20px rgba(248, 233, 209, 0.2); transform: translateY(-20px) scale(0); }
}
#cake-container.animate .fuego { opacity: 1; }

/* Path Keyframes (tidak berubah) */
@keyframes bizcocho_1 { from { d: path("M173.667,21.571c-33.174,0-111.467,0-147.334,0c-4,0-4-16.002,0-16.002c39.836,0,105.982,0,147.334,0 C177.668,5.569,177.667,21.571,173.667,21.571z"); } to { d: path("M173.667,475.571c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002c43.566,0,97.96,0,147.334,0 C177.667,459.569,177.666,475.571,173.667,475.571z"); } }
@keyframes relleno_1 { from { d: path("M101.368-73.685c0,12.164,0,15.18,0,28.519c0,22.702,0-13.661,0,8.304c0,14.48,0,18.233,0,30.512 c0,1.753-2.958,1.847-2.958,0c0-12.68,0-16.277,0-30.401c0-21.983,0,11.66,0-8.305c0-13.027,0-15.992,0-28.628 C98.411-75.883,101.368-75.592,101.368-73.685z"); } to { d: path("M173.667,451.394c2.875,0,2.997,9.257,0,9.131c-22.662-0.956-32.09-0.956-41.756-0.956 c-14.48,0-17.884,0-30.163,0c-2.087,0-2.068,0-3.915,0c-13.333,0-8.963,0-23.088,0c-11.668,0-34.99-0.294-48.412,1.831 c-4.109,0.65-3.01-10.006,0-10.006C37.129,451.394,149.379,451.394,173.667,451.394z"); } }
@keyframes bizcocho_2 { from { d: path("M173.667-15.929c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002 c43.566,0,97.96,0,147.334,0C177.667-31.931,177.666-15.929,173.667-15.929z"); } to { d: path("M173.667,451.394c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002 c44.697,0,96.586,0,147.334,0C177.667,435.392,177.668,451.394,173.667,451.394z"); } }
@keyframes relleno_2 { from { d: path("M100-178.521c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227 c0,19.144,0,57.431,0,76.574c0,10.152,0,40.607,0,40.607c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364c0,0,0-30.455,0-40.607c0-19.144,0-57.432,0-76.575c0-11.057,0-44.226,0-44.226C96.636-177.015,98.142-178.521,100-178.521 L100-178.521z"); } to { d: path("M102.242,427.569c5.348,0,14.079,0,17.462,0c0,0,17.026,0,27.504,0 c19.143,0,20.39-3.797,26.459,0c3,1.877,0,7.823,0,7.823c-2.412,2.258-58.328,0-73.667,0l0,0c-1.858,0-67.187,0-73.667,0 c0,0-4.125-4.983,0-7.823c5.201-3.58,16.085,0,23.725,0c8.841,0,20.762,0,20.762,0c3.686,0,8.597,0,19.511,0H102.242z"); } }
@keyframes bizcocho_3 { from { d: path("M173.667-13.94c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002 c44.697,0,96.586,0,147.334,0C177.667-29.942,177.668-13.94,173.667-13.94z"); } to { d: path("M173.667,427.569c-49.795,0-101.101,0-147.334,0c-3.999,0-4-16.002,0-16.002 c46.385,0,97.539,0,147.334,0C177.668,411.567,177.667,427.569,173.667,427.569z"); } }
@keyframes crema { from { d: path("M104.812,113.216c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.375 c0-5.143,0-15.427,0-20.568c0-7.333,0-21.998,0-29.33c0-5.523,0-16.569,0-22.092c0-3.295,0-9.885,0-13.181 C95.188,2.551,97.353,0,100,0c2.648,0,4.812,2.551,4.812,5.669c0,3.248,0,9.743,0,12.991c0,5.428,0,16.284,0,21.711 c0,7.618,0,22.854,0,30.472c0,4.952,0,14.854,0,19.807C104.812,96.292,104.812,107.576,104.812,113.216z"); } to { d: path("M111.547,415.233c-6.667-0.834-9.667,4.667-13.833,3.333c-19.649-6.291-8.158,22.176-14.5,22.334 c-6.667,0.166,2.833-18-13.333-22.167c-29.544-7.615-9.667,43.833-20.167,43.833c-10.333,0,8.004-55.006-16.833-39 c-7.5,4.833-9.508-3.78-9.299-7.004c0.799-12.329,23.592-7.153,38.132-7.329c10.234-0.124,20.238-1.505,38.287-2.167 c16.642-0.61,32.903,1.125,46.213,1.5c12.438,0.351,35.058-5.579,31.863,6.451c-5.532,20.833,1.25,28.216-4.409,27.883 c-7.606-0.447-6.058-37.895-20.62-23.333c-10.167,10.166-15.972-0.747-25,12C119.547,443.568,121.798,416.515,111.547,415.233z"); } }

/* --- Message Card --- */
.message-card { background: var(--card-dark); border-radius: 15px; padding: 2.5rem; box-shadow: 0 10px 30px var(--shadow-color); text-align: center; }
#personal-greeting { font-family: 'Pacifico', cursive; font-size: 2.5rem; min-height: 7rem; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--accent-color); font-weight: 500;}
#personal-greeting > span { min-height: 3rem; }
#personal-message { font-size: 1.1rem; line-height: 1.8; color: var(--text-subtle); margin-top: 1rem; }
#personal-signature { margin-top: 2rem; font-style: italic; color: var(--text-subtle); }

/* --- Timeline, Galleries, Footer --- */
.timeline { position: relative; max-width: 600px; margin: 0 auto; }
.timeline::after { content: ''; position: absolute; width: 4px; background-color: var(--accent-color); top: 0; bottom: 0; left: 50%; margin-left: -2px; border-radius: 2px; }
.timeline-item { padding: 10px 40px; position: relative; background-color: inherit; width: 50%; }
.timeline-item::after { content: ''; position: absolute; width: 20px; height: 20px; right: -10px; background-color: var(--bg-dark); border: 4px solid var(--accent-color); top: 25px; border-radius: 50%; z-index: 1; }
.timeline-item.left { left: 0; text-align: right; }
.timeline-item.right { left: 50%; text-align: left; }
.timeline-item.right::after { left: -10px; }
.timeline-content { padding: 20px; background-color: var(--card-dark); position: relative; border-radius: 8px; }
.timeline-content h3 { color: var(--accent-color); margin-bottom: 5px; }
.timeline-content p { color: var(--text-subtle); font-size: 0.9rem; }
.gallery-grid, .video-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
.gallery-grid img { width: 100%; height: 100%; object-fit: cover; border-radius: 10px; box-shadow: 0 5px 15px var(--shadow-color); transition: transform 0.3s, filter 0.3s; cursor: pointer; }
.gallery-grid img:hover { transform: scale(1.05); filter: brightness(1.1); }
.video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px var(--shadow-color); }
.video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
footer { text-align: center; padding: 30px; font-size: 0.9rem; color: var(--text-subtle); }

/* --- Music Player --- */
#music-player { position: fixed; bottom: 0; left: 0; right: 0; height: 80px; background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(10px); z-index: 100; border-top: 1px solid rgba(255, 255, 255, 0.1); }
.player-container { max-width: 1200px; margin: 0 auto; height: 100%; padding: 0 16px; display: flex; align-items: center; gap: 16px; justify-content: space-between; }
#player-artwork { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; }
.player-info { display: flex; align-items: center; gap: 15px; flex-grow: 1; min-width: 0;}
#player-title { font-weight: 700; color: var(--text-light); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
#player-artist { font-size: 0.9rem; color: var(--text-subtle); white-space: nowrap; }
.player-controls { display: flex; align-items: center; gap: 16px; }
.player-controls button { background: none; border: none; cursor: pointer; color: var(--text-light); transition: color 0.2s, transform 0.1s ease; display: flex; align-items: center; justify-content: center; }
.player-controls button:hover { color: var(--accent-color); }
.player-controls button:active { transform: scale(0.9); }
#play-pause-btn { background-color: var(--accent-color); border-radius: 50%; width: 48px; height: 48px; color: white; }
#prev-btn, #next-btn { width: 36px; height: 36px; }

/* --- Lightbox --- */
.lightbox { display: none; position: fixed; z-index: 1000; padding-top: 100px; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9); }
.lightbox-content { margin: auto; display: block; width: 80%; max-width: 700px; animation: zoomIn 0.6s; }
@keyframes zoomIn { from { transform: scale(0) } to { transform: scale(1) } }
.lightbox-close { position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; transition: 0.3s; }
.lightbox-close:hover, .lightbox-close:focus { color: #bbb; text-decoration: none; cursor: pointer; }


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    .timeline::after { left: 20px; }
    .timeline-item { width: 100%; padding-left: 50px; padding-right: 10px; }
    .timeline-item.left, .timeline-item.right { left: 0; text-align: left; }
    .timeline-item::after { left: 10px; }
    .section-title { font-size: 2rem; }
    #player-artist { display: none; }
    .player-info { gap: 10px; }
    .player-controls { gap: 10px; }
}